<!doctype html>
<html lang="es">
<head>

  <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Biogrid</title>
  <style>

    :root { --bg:#efefef; --card:#fff; --ink:#333; }
    *{box-sizing:border-box} body{margin:0; font-family:system-ui,Segoe UI,Roboto,Arial; color:var(--ink); background:var(--bg);}
    .container{max-width:1200px; margin:32px auto; padding:0 16px;}
    header{display:flex; align-items:center; justify-content:space-between; margin-bottom:24px;}
    h1{font-size:42px; margin:0; font-weight:800;}
    .add-btn{display:inline-flex; align-items:center; justify-content:center; width:36px;height:36px; border-radius:999px;border:1px solid #aaa;background:#fafafa;cursor:pointer;font-size:22px;color:#333;text-decoration:none}
    .grid{display:grid; grid-template-columns:repeat(4,1fr); gap:24px;}
    @media (max-width:1000px){.grid{grid-template-columns:repeat(3,1fr)}}
    @media (max-width:700px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:480px){.grid{grid-template-columns:1fr}}
    .card{padding:0;border:none;background:transparent;cursor:pointer;text-align:center}
    .thumb{width:100%;aspect-ratio:1/1;overflow:hidden;border-radius:6px;background:#ddd}
    .thumb img{width:100%;height:100%;object-fit:cover;filter:grayscale(100%)}
    .name{margin-top:10px;font-size:13px;font-weight:800;letter-spacing:.7px;color:#777;text-transform:uppercase}
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;padding:16px}
    .modal{width:min(880px,100%);background:#fff;border-radius:10px;box-shadow:0 10px 40px rgba(0,0,0,.35);overflow:hidden}
    .modal-head{display:flex;align-items:center;gap:16px;padding:16px;border-bottom:1px solid #eee}
    .close{margin-left:auto;font-size:22px;cursor:pointer;color:#999}
    .modal-body{display:grid;grid-template-columns:240px 1fr;gap:18px;padding:18px}
    .modal-body img{width:100%;aspect-ratio:1/1;object-fit:cover;border-radius:6px}
    .meta,.summary{background:#f6f6f6;border-radius:8px;padding:14px}
    .meta dt{font-weight:900;margin-top:8px} .meta dd{margin:2px 0 8px 0;color:#555}
    .danger{display:inline-block;margin-top:12px;padding:8px 12px;border-radius:6px;
          background:#fbe9e9;color:#a31313;text-decoration:none;font-weight:700}
    .danger:hover{background:#f6d4d4}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>BIOGRID</h1>
      <a href="{% url 'bio_add' %}" class="add-btn" title="Agregar biografía">+</a>
    </header>


  
    <section class="grid">
      {% for b in bios %}
        <button class="card"
          data-id="{{ b.id }}"
          data-name="{{ b.name }}"
          data-occupation="{{ b.occupation }}"
          data-birth="{{ b.birth }}"
          data-death="{{ b.death }}"
          data-nationality="{{ b.nationality }}"
          data-summary="{{ b.summary|escapejs }}"
          data-image="{{ b.image.url }}">
          <div class="thumb"><img src="{{ b.image.url }}" alt="{{ b.name }}"></div>
          <div class="name">{{ b.name }}</div>
        </button>
      {% empty %}
        <p>No hay biografías aún. Pulsa “+” para agregar una.</p>
      {% endfor %}
    </section>
  </div>

  <div id="overlay" class="overlay" aria-hidden="true">
    <div class="modal">
      <div class="modal-head"><div style="font-weight:800">BIOGRID</div><div id="closeBtn" class="close">×</div></div>
      <div class="modal-body">
        <div>
          <img id="mImg" src="" alt=""><div id="mName" style="text-align:center;margin-top:8px;font-weight:800">NOMBRE</div>
        </div>
        <div>
          <div class="meta">
            <dl>
              <dt>Nombre:</dt><dd id="f_name">—</dd>
              <dt>Ocupación:</dt><dd id="f_occ">—</dd>
              <dt>Nacimiento:</dt><dd id="f_birth">—</dd>
              <dt>Muerte:</dt><dd id="f_death">—</dd>
              <dt>Nacionalidad:</dt><dd id="f_nat">—</dd>
            </dl>
          </div>
          <div class="summary" id="f_summary">—</div>
          <a id="delBtn" class="danger" href="#"> Eliminar </a>
        </div>
      </div>
    </div>
  </div>
  <script>
    const overlay=document.getElementById('overlay'); 
    const closeBtn=document.getElementById('closeBtn');
    const delBtn=document.getElementById('delBtn');

    function openModal(btn){
      overlay.style.display='flex'; overlay.setAttribute('aria-hidden','false');
      mImg.src=btn.dataset.image; mImg.alt=btn.dataset.name; mName.textContent=btn.dataset.name;
      f_name.textContent=btn.dataset.name; f_occ.textContent=btn.dataset.occupation||'—';
      f_birth.textContent=btn.dataset.birth||'—'; f_death.textContent=btn.dataset.death||'—';
      f_nat.textContent=btn.dataset.nationality||'—'; f_summary.textContent=btn.dataset.summary||'—';

      delBtn.href = `/delete/${btn.dataset.id}/`;
      
      document.body.style.overflow='hidden';
    }
    function closeModal(){ overlay.style.display='none'; overlay.setAttribute('aria-hidden','true'); document.body.style.overflow=''; }
    closeBtn.addEventListener('click',closeModal);
    overlay.addEventListener('click',(e)=>{ if(e.target===overlay) closeModal(); });
    document.querySelectorAll('.card').forEach(b=>b.addEventListener('click',()=>openModal(b)));
    document.addEventListener('keydown',(e)=>{ if(e.key==='Escape') closeModal(); });
  </script>
</body>
</html>